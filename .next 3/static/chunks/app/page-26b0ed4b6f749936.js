(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},1228:function(e,l,t){Promise.resolve().then(t.t.bind(t,8173,23)),Promise.resolve().then(t.bind(t,5282))},5282:function(e,l,t){"use strict";t.d(l,{default:function(){return g}});var n=t(7437),s=t(2265),a=t(7800),r=t(9343),i=function(e){let{OnclickHandler:l}=e,{handleSubmit:t,control:s,formState:{errors:a},watch:i}=(0,r.cI)({defaultValues:{Tenantname:"",roomNo:"",OldMeterReading:0,NewMeterReading:0,UnitUsed:0,BillAmount:0,PreviousBalance:0,TotalAmount:0,Rent:0}}),o=i("NewMeterReading"),d=i("OldMeterReading"),c=i("BillAmount"),m=i("PreviousBalance"),u=i("Rent"),x=()=>{let e=parseFloat(d);return parseFloat(o)-e},h=()=>parseFloat(c)+parseFloat(m)+parseFloat(u),g="border font-700 w-full rounded-xl p-2 font-semibold my-2",j="text-secondary-400 text-sm";return(0,n.jsxs)("form",{onSubmit:t(e=>{let t=x(),n=h(),s={...e,UnitUsed:t,TotalAmount:n};console.log(s),l(s)}),className:"max-w-md mx-auto",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 my-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"Tenantname",className:j,children:"Tenant Name *"}),(0,n.jsx)(r.Qr,{name:"Tenantname",control:s,rules:{required:"Tenant name is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"text",id:"Tenantname",placeholder:"Enter tenant name",className:"".concat(g," ").concat(a.Tenantname?"border-danger-600":"")})}}),a.Tenantname&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.Tenantname.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"roomNo",className:j,children:"Room Number *"}),(0,n.jsx)(r.Qr,{name:"roomNo",control:s,rules:{required:"Room number is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"text",id:"roomNo",placeholder:"Enter room number",className:"".concat(g," ").concat(a.roomNo?"border-danger-600":"")})}}),a.roomNo&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.roomNo.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"OldMeterReading",className:j,children:"Old Meter Reading *"}),(0,n.jsx)(r.Qr,{name:"OldMeterReading",control:s,rules:{required:"Old meter reading is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"OldMeterReading",placeholder:"Enter old meter reading",className:"".concat(g," ").concat(a.OldMeterReading?"border-danger-600":"")})}}),a.OldMeterReading&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.OldMeterReading.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"NewMeterReading",className:j,children:"New Meter Reading *"}),(0,n.jsx)(r.Qr,{name:"NewMeterReading",control:s,rules:{required:"New meter reading is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"NewMeterReading",placeholder:"Enter new meter reading",className:"".concat(g," ").concat(a.NewMeterReading?"border-danger-600":"")})}}),a.NewMeterReading&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.NewMeterReading.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"UnitUsed",className:j,children:"Units Used"}),(0,n.jsx)(r.Qr,{name:"UnitUsed",control:s,render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"UnitUsed",value:x(),readOnly:!0,className:"".concat(g," bg-gray-100")})}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"BillAmount",className:j,children:"Bill Amount *"}),(0,n.jsx)(r.Qr,{name:"BillAmount",control:s,rules:{required:"Bill amount is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"BillAmount",placeholder:"Enter bill amount",className:"".concat(g," ").concat(a.BillAmount?"border-danger-600":"")})}}),a.BillAmount&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.BillAmount.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"PreviousBalance",className:j,children:"Previous Balance"}),(0,n.jsx)(r.Qr,{name:"PreviousBalance",control:s,render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"PreviousBalance",placeholder:"Enter previous balance",className:g})}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"Rent",className:j,children:"Rent *"}),(0,n.jsx)(r.Qr,{name:"Rent",control:s,rules:{required:"Rent is required"},render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",id:"Rent",placeholder:"Enter rent amount",className:"".concat(g," ").concat(a.Rent?"border-danger-600":"")})}}),a.Rent&&(0,n.jsx)("p",{className:"text-danger-600 text-xs mt-1",children:a.Rent.message})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"TotalAmount",className:j,children:"Total Amount"}),(0,n.jsx)(r.Qr,{name:"TotalAmount",control:s,render:e=>{let{field:l}=e;return(0,n.jsx)("input",{...l,type:"number",value:h(),readOnly:!0,className:"".concat(g," bg-gray-100")})}})]})]}),(0,n.jsx)("div",{className:"flex justify-end mt-4",children:(0,n.jsx)("button",{type:"submit",className:"bg-primary-500 py-2 px-4 bg-purple-700 text-white rounded-lg",children:"Submit"})})]})},o=e=>{let{isOpen:l,children:t,onClose:a,Width:r,showCross:i=!0}=e;return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l&&a()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[l,a]),(0,s.useEffect)(()=>{let e=e=>{if("Enter"===e.key&&l){let e=document.querySelector(".modal-button");e&&e.click()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[l]),(0,n.jsx)("div",{children:l&&(0,n.jsx)("div",{className:"fixed top-0 left-0 right-0 z-30 flex items-center justify-center w-full h-screen bg-opacity-50 bg-gray-500  backdrop-filter backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-3xl shadow  ".concat(r),children:[i&&a&&(0,n.jsxs)("button",{type:"button",className:"absolute z-0 top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-800 dark:hover:text-white",onClick:a,children:[(0,n.jsx)("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,n.jsx)("span",{className:"sr-only",children:"Close modal"})]}),(0,n.jsx)("div",{className:"px-6 py-6 lg:px-8 max-h-screen",children:(0,n.jsx)("div",{className:"overflow-y-auto max-h-100 md:max-h-116 p-3 z-50",children:t})})]})})})},d=t(1359),c=e=>{let l,{buildingNo:t,data:s,editHandler:a,downloadHandler:r}=e;return console.log("dataIncoming",s),(0,n.jsx)("div",{className:"   flex justify-center  rounded-xl  w-[760px]  min-h-[400px] ",children:(0,n.jsx)("div",{className:"   flex gap-3 ",children:(0,n.jsxs)("div",{className:" bg-gray-50 outline outline-1 w-full outline-gray-400",children:[(0,n.jsxs)("div",{className:" flex  w-full     border-b-2  border-y-gray-400 justify-evenly",children:[(0,n.jsx)("div",{className:" flex justify-center items-center",children:(0,n.jsx)(d.JO,{height:45,icon:"material-symbols-light:house-outline"})}),(0,n.jsxs)("div",{className:" m-2 min-w-[300px] flex justify-center  flex-col items-center outline p-2  outline-1 outline-gray-400 rounded-2xl",children:[(0,n.jsxs)("h1",{className:" font-bold text-2xl",children:["RENT SLIP ",t," "]}),(0,n.jsxs)("h1",{children:[t," DLF PHASE III, GURGAON"]})]}),(0,n.jsxs)("div",{className:" flex justify-center items-center border-l-2 border-y-gray-400 p-2",children:[(0,n.jsx)(d.JO,{height:30,icon:"carbon:phone"}),(0,n.jsx)("h1",{className:" mb-1 text-base font-bold",children:"9818862972"})]})]}),(0,n.jsxs)("div",{className:" grid grid-cols-2 mt-6 gap-3  border-b-2 border-gray-400 ",children:[(0,n.jsx)("div",{className:" ml-2  flex justify-start outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Name : ",null==s?void 0:s.Tenantname," "]})}),(0,n.jsx)("div",{className:" mr-2  flex justify-start outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Room No. : ",null==s?void 0:s.roomNo," "]})}),(0,n.jsx)("div",{className:" mb-4  ml-2 flex justify-start outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{children:["Month : ",(l=new Date,"".concat(l.getDate()).concat("/").concat(l.getMonth()+1).concat("/").concat(l.getFullYear()))]})})]}),(0,n.jsx)("div",{className:"  mt-3  border-b-2 text-center flex justify-center border-gray-400 ",children:(0,n.jsx)("h1",{className:" font-semibold  mb-2 text-base ",children:"DETAILS"})}),(0,n.jsxs)("div",{className:" grid grid-cols-2 gap-2 mt-4 mr-2 ",children:[(0,n.jsx)("div",{className:" ml-2  flex justify-start    outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Security Deposit : ",null==s?void 0:s.PreviousBalance," "]})}),(0,n.jsx)("div",{className:" ml-2  flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Rent @Charges : ",null==s?void 0:s.Rent," "]})}),(0,n.jsxs)("div",{className:" ml-2  flex flex-col justify-start mb-2   outline outline-1 outline-gray-500 p-2 rounded-lg",children:[(0,n.jsxs)("h1",{className:" text-base font-medium  mb-2 ",children:["Electrical Charges :"," "]}),(0,n.jsxs)("div",{className:" flex flex-col gap-4",children:[(0,n.jsx)("div",{className:" ml-2  flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Old Reading : ",null==s?void 0:s.OldMeterReading," "]})}),(0,n.jsx)("div",{className:" ml-2  flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["New Reading : ",null==s?void 0:s.NewMeterReading," "]})}),(0,n.jsx)("div",{className:" ml-2  flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Unit Used :  ",null==s?void 0:s.UnitUsed]})}),(0,n.jsx)("div",{className:" ml-2  flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Amount : ",null==s?void 0:s.BillAmount," "]})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:" ml-2  flex justify-start h-[40px]   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Previous Balance : ",null==s?void 0:s.PreviousBalance," "]})}),(0,n.jsxs)("div",{className:" text-base font-semibold ",children:[(0,n.jsx)("h1",{className:" mt-20",children:"Payer Signatory"}),(0,n.jsx)("h1",{className:" mt-20",children:"Authorised Signatory"})]})]}),(0,n.jsx)("div",{className:" ml-2  mb-4 flex justify-start   outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("h1",{className:" text-base font-medium  ",children:["Total Amount :  ",null==s?void 0:s.TotalAmount," "]})})]}),(0,n.jsx)("div",{className:" ml-2 mr-2  mb-4 flex justify-center  outline outline-1 outline-gray-500 p-2 rounded-lg",children:(0,n.jsxs)("ol",{spellCheck:!0,children:[(0,n.jsxs)("li",{className:" text-base  font-bold",children:[" ",(0,n.jsx)("span",{className:"  text-red-500",children:" INTREST @ 12%"})," will be charged if rent is not paid bt 7th of Month."]}),(0,n.jsx)("li",{className:" text-base  font-bold",children:"Maintance charge will be on vocation of Room as per maintaince of Room."}),(0,n.jsx)("li",{className:" text-sm  font-bold",children:"Please send/whatsapp on 9466399785 for the payment made online/cash against this slip."})]})})]})})})},m=t(7293);let u=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map(function(e){return"."+e}).join(","),x=e=>{let l=[],t=a.P6.decode_range(e).e.c+1;for(var n=0;n<t;++n)l[n]={name:a.P6.encode_col(n),key:n};return l},h=()=>{};var g=()=>{let[e,l]=(0,s.useState)(null),[t,r]=(0,s.useState)([]),[g,j]=(0,s.useState)([]),[N,f]=(0,s.useState)(""),[b,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(),[w,_]=(0,s.useState)(),[R,M]=(0,s.useState)(!1),[T,E]=(0,s.useState)(""),A=(0,s.useRef)({}),[P,k]=(0,s.useState)([{Tenantname:"",roomNo:"",OldMeterReading:0,NewMeterReading:0,UnitUsed:0,BillAmount:0,PreviousBalance:0,TotalAmount:0}]),B=P.filter(e=>e.Tenantname.toLowerCase().includes(T.toLowerCase())||e.roomNo.toString().includes(T)),O=async(e,l)=>{console.log("calling",e);let t=A.current[e];if(!t){console.error("Receipt element not found");return}try{let e=await m.YM(t),n=document.createElement("a");n.download="".concat(l,".png"),n.href=e,n.click()}catch(e){console.error("Error generating image:",e)}},S=async()=>{for(let e in A.current){let l=P[e];l&&await O(e,l.roomNo)}};return(0,n.jsxs)("div",{className:"p-12",children:[(0,n.jsxs)("div",{className:"flex justify-evenly",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{className:"text-base font-medium",htmlFor:"file",children:"Upload an excel to Process Triggers"}),(0,n.jsx)("input",{type:"file",className:"form-control mt-2",id:"file",accept:u,onChange:e=>{let t=e.target.files;t&&t[0]&&l(t[0])}}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:"bg-purple-700 text-white font-semibold p-3 rounded-2xl mt-4",type:"submit",onClick:()=>{let l=new FileReader,t=!l.readAsBinaryString;l.onload=e=>{let l=e.target.result,n=a.ij(l,{type:t?"binary":"array",bookVBA:!0}),s=n.SheetNames[0];f(s);let i=n.Sheets[s],o=a.P6.sheet_to_json(i);r(o),j(x(i["!ref"]));let d=e=>Object.keys(e)[0],c=o.slice(2).map(e=>e[d(e)]);k(o.slice(2).map((e,l)=>({Tenantname:e.__EMPTY_1,roomNo:c[l],PhoneNumber:e.__EMPTY_2?e.__EMPTY_2:"Not Available",OldMeterReading:e.__EMPTY_10?e.__EMPTY_10:"Not Available",NewMeterReading:(null==e?void 0:e.__EMPTY_11)?null==e?void 0:e.__EMPTY_11:"Not Available",AgreementNumber:(null==e?void 0:e.__EMPTY_4)?null==e?void 0:e.__EMPTY_4:"Not Available",Rent:(null==e?void 0:e.__EMPTY_9)?null==e?void 0:e.__EMPTY_9:"Not Available",UnitUsed:(null==e?void 0:e.__EMPTY_12)?null==e?void 0:e.__EMPTY_12:"Not Available",BillAmount:(null==e?void 0:e.__EMPTY_14)?null==e?void 0:e.__EMPTY_14:"Not Available",TotalAmount:(null==e?void 0:e.__EMPTY_18)?null==e?void 0:e.__EMPTY_18:"Not Available"})))},t?l.readAsBinaryString(e):l.readAsArrayBuffer(e)},children:"Process Triggers"})})]}),(0,n.jsxs)("div",{className:"flex justify-center items-center",children:[(0,n.jsx)("input",{className:"p-4 rounded-2xl outline outline-1 outline-purple-500 mr-5",onChange:e=>{_(e.target.value)},placeholder:"Enter Room Building Number"}),(0,n.jsx)("button",{onClick:()=>{w?p(!0):alert("Please Enter Building Number!!")},className:"p-4 bg-purple-700 text-white font-semibold rounded-2xl",children:"Create a receipt"})]})]}),P[0]&&(0,n.jsxs)("div",{className:" flex   justify-center ",children:[(0,n.jsx)("button",{className:"bg-purple-700 text-white font-semibold p-3 rounded-2xl mt-4 ml-4",onClick:S,children:"Download All Receipts"}),(0,n.jsx)("div",{className:"mt-3 flex  ml-3 justify-center",children:(0,n.jsx)("input",{type:"text",placeholder:"Search by tenant name or room number",value:T,onChange:e=>E(e.target.value),className:"p-2 w-64 border border-gray-300 rounded-md"})})]}),(0,n.jsxs)("div",{className:"text-black mt-24 text-center flex justify-center items-center",children:[(0,n.jsx)(o,{isOpen:R,onClose:()=>{M(!1)},children:void 0!==v&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{id:"man",ref:e=>A.current.man=e,className:"flex justify-center",children:(0,n.jsx)(c,{buildingNo:w,data:v})}),(0,n.jsxs)("div",{className:" flex gap-2",children:[(0,n.jsx)(d.JO,{onClick:()=>{h()},height:25,icon:"bx:edit"}),(0,n.jsx)(d.JO,{onClick:()=>{O("man",v.roomNo)},height:25,icon:"material-symbols:download-sharp"})]})]})}),void 0!==P&&(B.length>0?(0,n.jsxs)("div",{className:"h-[800px] overflow-scroll mt-1 gap-32",children:[(0,n.jsx)("h1",{className:"flex text-2xl font-bold justify-center items-center",children:"RENT SLIPS"}),B.map((e,l)=>(0,n.jsxs)("div",{className:"mt-12 flex",children:[(0,n.jsx)("div",{ref:e=>A.current[l]=e,children:(0,n.jsx)(c,{data:e,buildingNo:w,editHandler:h,downloadHandler:()=>O(l)})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(d.JO,{onClick:h,height:25,icon:"bx:edit"}),(0,n.jsx)(d.JO,{onClick:()=>{O(l,e.roomNo)},height:25,icon:"material-symbols:download-sharp"})]})]},l))]}):(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsx)("p",{children:"No receipts found matching your search."})})),(0,n.jsx)(o,{isOpen:b,onClose:()=>{p(!1)},children:(0,n.jsx)(i,{OnclickHandler:e=>{y(e),p(!1),M(!0)}})})]})]})}}},function(e){e.O(0,[425,866,971,23,744],function(){return e(e.s=1228)}),_N_E=e.O()}]);